{% extends "base.html" %}
{% block content %}
<table>
    <tr valign="top">
        <td><img src="{{ user.avatar(128) }}"></td>
        <td>
        <h1>User: {{ user.username }}</h1><br/>
        <h3>Email: {{ user.email }}</h3>
        </td>
    </tr>
</table>
{% if user == current_user %}
<p><a href="{{ url_for('user.edit_profile') }}">Edit your profile</a></p>
{% endif %}
<hr>
<h1>Manage own courses</h1>
    {% if current_user.is_authenticated %}
        <a class="action" href="{{ url_for('course.create') }}">New</a>
    {% endif %}
    {% for course in courses %}
        {% if current_user.id == course['lecturer_id'] %}
            <article class="post">
                <header>
                    <div>
                        <h1>{{ course['title'] }}</h1>
                        <img src="{{ course.avatar(36) }}">
                        <div class="about">by {{ course.lecturer.username }} on {{ course['created'].strftime('%Y-%m-%d') }}</div>
                    </div>
                    <a class="action" href="{{ url_for('course.update', id=course['id']) }}">Edit</a>
                </header>
                <p class="body">{{ course['outline'] }}</p>
            </article>
        {% endif %}
     {% endfor %}
<hr>
<h1>Learning courses</h1>
    {% for course in courses %}
        {% if current_user.is_learning(course) %}
            <article class="post">
                <header>
                    <div>
                        <h1>{{ course['title'] }}</h1>
                        <img src="{{ course.avatar(36) }}">
                        <div class="about">by {{ course.lecturer.username }} on {{ course['created'].strftime('%Y-%m-%d') }}</div>
                    </div>

                    <form action="{{ url_for('user.unfollow', courseid=course['id']) }}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='Unfollow') }}
                    </form>

                </header>
                <p class="body">{{ course['outline'] }}</p>
            </article>
            {% if not loop.last %}
                <hr>
            {% endif %}
        {% endif %}
    {% endfor %}
{% endblock %}