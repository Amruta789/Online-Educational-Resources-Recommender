{% extends "base.html" %}

{% block content %}
<table>
    <tr valign="top">
        <td><img src="{{ user.avatar(128) }}"></td>
        <td><h1>User: {{ user.username }}</h1></td>
    </tr>
</table>
<hr>
    {% for course in courses %}
        <article class="post">
            <header>
                <div>
                    <h1>{{ course['title'] }}</h1>
                    <img src="{{ course.avatar(36) }}">
                    <div class="about">by {{ course.lecturer.username }} on {{ course['created'].strftime('%Y-%m-%d') }}</div>
                </div>
                {% if current_user.id == course['lecturer_id'] %}
                <a class="action" href="{{ url_for('course.update', id=course['id']) }}">Edit</a>
                {% elif not current_user.is_learning(course) %}
                <form action="{{ url_for('user.learn', courseid=course['id']) }}" method="post">
                    {{ form.hidden_tag() }}
                    {{ form.submit(value='Learn') }}
                </form>
                {% else %}
                <form action="{{ url_for('user.unfollow', courseid=course['id']) }}" method="post">
                    {{ form.hidden_tag() }}
                    {{ form.submit(value='Unfollow') }}
                </form>
                {% endif %}
            </header>
            <p class="body">{{ course['outline'] }}</p>
        </article>
        {% if not loop.last %}
            <hr>
        {% endif %}
    {% endfor %}
    {% if user == current_user %}
        <p><a href="{{ url_for('edit_profile') }}">Edit your profile</a></p>
    {% endif %}
{% endblock %}